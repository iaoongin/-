{"pages":[],"posts":[{"title":"Welcome","text":"","link":"/2019/08/14/Welcome/"},{"title":"git push 本地项目到远程仓库","text":"1.进入项目目录1cd H:\\blog 2.初始化仓库1git init 3.添加所有文件到仓库1git add -A 4.提交1git commit -m &quot;init&quot; 5.建立好远程仓库1https://github.com/iaoongin/iaoongin.github.io.git 6.配置远程仓库http方式此方式需要输入密码12git remote add origin https://github.com/iaoongin/iaoongin.github.io.git// origin 是远程仓库的别名，用于代替git仓库地址 ssh方式此方式需要生成秘钥1git remote add origin git@github.com:iaoongin/iaoongin.github.io.git 1ssh-keygen -t rsa -C &quot;这里换上你的邮箱&quot; 生成秘钥,如下图 配置远程仓库key 7.开始推送12git push origin master:source// git push &lt;远程主机名&gt; &lt;本地分支名&gt;:&lt;远程分支名&gt; 分支说明12345// 本地默认初始为master分支// git branch -a 查看所有本地分支// git branch 查看当前分支// git branch abc 创建分支abc// git checkout abc 切换abc分支","link":"/2019/08/16/git-push-本地项目到远程仓库/"},{"title":"logstash input-jdbc 分页性能优化问题","text":"原因logstash 自带分页查询,竟然是查处所有数据再计数的。 1SELECT count(*) AS `count` FROM (SELECT * FROM ip_bundle_data_20190813) AS `t1` LIMIT 1 解决办法：修改源码 文件位置 1logstash-7.2.0\\vendor\\bundle\\jruby\\2.5.0\\gems\\logstash-input-jdbc-4.3.13\\lib\\logstash\\plugin_mixins\\jdbc\\jdbc.rb 添加参数 123456// line:100 =&gt; config# 开启子查询分页 @boole 2018-03-30config :subquery_paging_enabled, :validate =&gt; :boolean, :default =&gt; false# 总数sql，结果集列名为sum。for example `select count(*) as sum from goods` @boole 2018-03-30config :sum_statement, :validate =&gt; :string 修改方法 123456789101112131415161718192021222324252627282930// line:254 =&gt; perform_queryprivate def perform_query(query) #subquery paging @boole 2018-03-30 if @subquery_paging_enabled @logger.info(&quot;################### subquery paging optimization ################&quot;) data_sum = @database[@sum_statement].get(:sum) @logger.info(&quot;data_sum=#{data_sum}&quot;) data_offset = 0 while data_offset &lt; data_sum do @logger.info(&quot;data_offset=#{data_offset}&quot;) sub_page_query = @database[@statement, symbolized_params({&quot;data_offset&quot; =&gt; data_offset, &quot;jdbc_page_size&quot; =&gt; @jdbc_page_size})] sub_page_query.each do |row| yield row end data_offset += @jdbc_page_size end elsif @jdbc_paging_enabled query.each_page(@jdbc_page_size) do |paged_dataset| paged_dataset.each do |row| yield row end end else query.each do |row| yield row end end end 配置logstash.conf sql中使用:data_offset和:jdbc_page_size进行分页 12345statement =&gt; &quot;SELECT * FROM ip_bundle_data_20190813 limit :data_offset,:jdbc_page_size&quot;subquery_paging_enabled =&gt; &quot;true&quot;sum_statement =&gt; &quot;select count(*) as `count` from ip_bundle_data_20190813&quot;","link":"/2019/08/14/logstash-分页优化/"}],"tags":[{"name":"git","slug":"git","link":"/tags/git/"},{"name":"elk","slug":"elk","link":"/tags/elk/"},{"name":"logstash","slug":"logstash","link":"/tags/logstash/"}],"categories":[{"name":"code","slug":"code","link":"/categories/code/"}]}